<div class="mx-auto max-w-6xl px-4 py-6 space-y-6">
    <div class="flex items-start justify-between gap-4">
      <div>
        <div class="flex flex-wrap items-center gap-2">
          <h1 class="text-xl font-semibold text-gray-900">Bookings</h1>
          <span class="inline-flex items-center gap-2 rounded-full bg-gray-50 px-2.5 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-200">
            <%= inline_svg_tag "briefcase.svg", class: "h-4 w-4 text-gray-500" %>
            <span class="truncate max-w-[220px]"><%= @business.name %></span>
          </span>
        </div>
        <p class="mt-1 text-sm text-gray-500">Track and manage bookings for this business.</p>
      </div>

      <%= render partial: "shared/components/buttons/link",
        locals: { path: new_business_booking_path(@business), label: "Create Booking", svg: nil } %>
    </div>


  <div data-controller="sort" class="mt-6">
    <div class="flex gap-2 overflow-x-auto pb-4 lg:grid lg:grid-cols-3 lg:gap-2 lg:overflow-visible">
      <% @booking_columns.each do |key, col| %>
        <% styles = status_style(key) %>

        <section class="min-w-[18rem] lg:min-w-0">
          <!-- header -->
          <div class="rounded-xl border px-4 py-3 shadow-sm <%= styles[:head] %>">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <span class="h-2.5 w-2.5 rounded-full <%= styles[:dot] %>"></span>
                <h3 class="text-sm font-semibold text-gray-900"><%= col[:title] %></h3>
              </div>

              <span
                id="count-<%= key %>"
                class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ring-1 ring-inset <%= styles[:pill] %>"
              >
                <%= col[:bookings].size %>
              </span>
            </div>
          </div>

          <!-- body -->
          <ul
            id="<%= key %>"
            data-sort-target="column"
            data-column="<%= key %>"
            class="mt-3 min-h-[14rem] space-y-3"
          >
            <% col[:bookings].each do |booking| %>
              <li class="item" data-biz="<%= @business.id %>" data-id="<%= booking.id %>">
                <%= render partial: "booking", locals: { booking: booking, status_key: key } %>
              </li>
            <% end %>
          </ul>
        </section>
      <% end %>
    </div>
  </div>

</div>
