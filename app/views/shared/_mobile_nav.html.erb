<div
  id="mobile-nav-<%= navigation_version_key %>"
  data-controller="drawer navigation"
  data-turbo-permanent
  class="lg:hidden"
>
  <div class="flex h-14 items-center justify-between border-b border-gray-200 bg-white px-4">
    <button type="button" data-action="drawer#open" class="rounded-lg p-2 hover:bg-gray-100">
      ☰
    </button>
    <p class="text-sm font-semibold text-gray-900"> <%= @tenant.name %> </p>
    <div class="w-10"></div>
  </div>

  <div data-drawer-target="panel" class="hidden fixed inset-0 z-50">
    <div data-action="click->drawer#close" class="absolute inset-0 bg-black/40"></div>

    <div class="relative h-full w-72 bg-white shadow-xl">
      <div class="flex h-16 items-center justify-between px-4 border-b border-gray-200">
        <p class="text-sm font-semibold text-gray-900">Menu</p>
        <button type="button" data-action="drawer#close" class="rounded-lg p-2 hover:bg-gray-100">✕</button>
      </div>

      <div class="h-[calc(100%-4rem)] overflow-y-auto p-4 space-y-6">
        <% active = nav_active?(dashboard_item) %>
        <%= link_to root_path, class: nav_item_classes(active), data: nav_link_data(dashboard_item) do %>
          <%= inline_svg_tag "home.svg", class: nav_icon_classes(active), data: nav_icon_data %>
          Home
        <% end %>

        <div class="space-y-3">
          <p class="px-2 text-[11px] font-semibold tracking-wider text-gray-400 uppercase">Businesses</p>
          <div class="space-y-2">
            <%= render @businesses %>
            <%= render partial: "businesses/expand" %>
          </div>
        </div>

        <div class="space-y-3">
          <p class="px-3 text-[11px] font-semibold tracking-wider text-gray-400 uppercase">Account</p>
          <div class="space-y-1.5">
            <% settings_items.each do |item| %>
              <% active = nav_active?(item) %>
              <%= link_to item.path, class: nav_item_classes(active), data: nav_link_data(item) do %>
                <%= inline_svg_tag "#{item.icon}.svg", class: nav_icon_classes(active), data: nav_icon_data %>
                <span class="truncate"><%= item.label %></span>
              <% end %>
            <% end %>

            <%= button_to destroy_user_session_path, method: :delete,
              class: "group w-full flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition" do %>
              <%= inline_svg_tag "logout.svg", class: "h-5 w-5 text-gray-400 group-hover:text-gray-600" %>
              <span>Sign out</span>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
