<%= form_with model: [@business, @service], class: "space-y-6" do |f| %>
  <% name_has_error = @service.errors.full_messages_for(:name).any? %>
  <% price_has_error = @service.errors.full_messages_for(:price).any? %>

  <% base_input =
      "w-full rounded-lg bg-gray-50 border px-3 py-2 text-sm text-gray-900 " \
      "placeholder:text-gray-400 outline-none transition " \
      "focus:bg-white focus:ring-4 focus:ring-black/10 focus:border-gray-900" %>

  <% input_ok    = "#{base_input} border-gray-200" %>
  <% input_error = "#{base_input} border-red-300 focus:ring-red-500/10 focus:border-red-500" %>

  <div class="space-y-1">
    <h2 class="text-lg font-semibold text-gray-900">Create service</h2>
    <p class="text-sm text-gray-500">Add a service to your catalog.</p>
  </div>

  <!-- Service name -->
  <div class="space-y-2">
    <div class="flex items-center justify-between">
      <%= f.label :name, "Service name", class: "text-sm font-medium text-gray-900" %>
      <% if name_has_error %>
        <span class="text-xs font-medium text-red-600">
          <%= @service.errors.full_messages_for(:name).first %>
        </span>
      <% end %>
    </div>

    <%= f.text_field :name,
      placeholder: "e.g. 60-min Massage",
      class: (name_has_error ? input_error : input_ok) + " text-base font-semibold"
    %>
  </div>

  <%= f.hidden_field :business_id, value: @business.id %>

  <!-- Price -->
  <div class="space-y-2">
    <div class="flex items-center justify-between">
      <%= f.label :price, "Price", class: "text-sm font-medium text-gray-900" %>
      <% if price_has_error %>
        <span class="text-xs font-medium text-red-600">
          <%= @service.errors.full_messages_for(:price).first %>
        </span>
      <% end %>
    </div>
    <div class="relative">
      <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-400">$</span>
      <%= f.number_field :price,
        step: 0.01,
        min: 0,
        placeholder: "0.00",
        class: (price_has_error ? input_error : input_ok) + " pl-7"
      %>
    </div>
    <p class="text-xs text-gray-500">Set a base price for this service.</p>
  </div>

  <!-- Description -->
  <div class="space-y-2">
    <%= f.label :description, "Description", class: "text-sm font-medium text-gray-900" %>
    <%= f.text_area :description,
      rows: 4,
      placeholder: "Add your descriptionâ€¦",
      class: input_ok + " resize-none"
    %>
  </div>

  <div class="flex items-center justify-end gap-3 pt-2 border-t border-gray-100">
    <button type="submit" class="inline-flex items-center justify-center rounded-lg border border-gray-900 bg-gray-900 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-black/10">
      Create Service
    </button>
  </div>
<% end %>
