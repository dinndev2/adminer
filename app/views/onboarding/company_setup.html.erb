<% input_base = "mt-2 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2.5 text-sm text-gray-900 shadow-sm placeholder:text-gray-400 focus:border-gray-400 focus:outline-none focus:ring-4 focus:ring-gray-100" %>

<div class="mb-8">
  <h2 class="text-2xl font-bold text-gray-900">Set up your company</h2>
  <p class="text-gray-500 mt-1">This information will be visible to your team.</p>
</div>

<%= form_with model: @tenant, url: onboarding_path(step), method: :patch,
  data: { controller: "form" },
  class: "relative pb-28" do |f| %>

  <!-- CONTENT (no container) -->
  <div class="space-y-8 max-w-5xl">
    <!-- Logo -->
    <div class="flex items-center gap-6">
      <%= f.file_field :logo, class: "hidden",
        data: { form_target: "fileInput", action: "change->form#preview" } %>

      <button type="button"
        data-action="click->form#triggerUpload"
        class="group relative rounded-xl focus:outline-none focus:ring-4 focus:ring-gray-100">
        <% logo_url =
            if @tenant.persisted? && @tenant.logo.attached?
              rails_blob_url(@tenant.logo, only_path: true)
            else
              asset_path("image-fallback.svg")
            end
          %>

          <%= image_tag logo_url,
            fallback: "image-fallback.svg",
            class: "h-16 w-16 rounded-full object-cover",
            data: { form_target: "preview" }
          %>
        <span class="absolute inset-0 rounded-xl bg-black/0 group-hover:bg-black/5"></span>
      </button>

      <div>
        <p class="text-sm font-semibold text-gray-800">Company logo</p>
        <p class="text-xs text-gray-500">Shown across the app</p>
      </div>
    </div>

    <!-- Fields -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <%= f.label :name, class: "text-sm font-medium text-gray-700" %>
        <%= f.text_field :name, placeholder: "Company name", class: input_base %>
      </div>

      <div>
        <%= f.label :website, class: "text-sm font-medium text-gray-700" %>
        <%= f.url_field :website, placeholder: "https://example.com", class: input_base %>
      </div>

      <div>
        <%= f.label :industry, class: "text-sm font-medium text-gray-700" %>
        <div class="relative">
          <%= f.select :industry,
            ["Probject Based", "Booking Services", "Healthcare", "Education", "Other"],
            { include_blank: "Select Business area" },
            class: "#{input_base} appearance-none pr-10" %>
          <span class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-400">▾</span>
        </div>
      </div>

      <div>
        <%= f.label :company_size, class: "text-sm font-medium text-gray-700" %>
        <div class="relative">
          <%= f.select :company_size,
            ["1-5", "6-20", "21-50", "51-200", "200+"],
            { include_blank: "Select size" },
            class: "#{input_base} appearance-none pr-10" %>
          <span class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-400">▾</span>
        </div>
      </div>
    </div>

    <div>
      <%= f.label :description, class: "text-sm font-medium text-gray-700" %>
      <%= f.text_area :description, rows: 5,
        placeholder: "Short description of your company…",
        class: "#{input_base} resize-y" %>
    </div>
  </div>

  <!-- STICKY FOOTER ACTIONS -->
  <div class="fixed left-0 right-0 bottom-0 md:left-[380px] border-gray-200 backdrop-blur">
    <div class="mx-auto max-w-4xl px-6 md:px-12 py-4 flex items-center justify-between">
      <%= link_to "Back", wizard_path(previous_step),
        class: "inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-100" %>

      <%= f.submit "Continue",
        class: "inline-flex items-center justify-center rounded-lg bg-gray-900 px-6 py-2.5 text-sm font-semibold text-white hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-100" %>
    </div>
  </div>
<% end %>
